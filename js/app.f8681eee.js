(function(){"use strict";var t={1948:function(t,n,e){var r=e(6369),o=function(){var t=this,n=t._self._c;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[],a=e(1001),i={},c=(0,a.Z)(i,o,s,!1,null,null,null),u=c.exports,l=e(2631),f=function(){var t=this,n=t._self._c;return n("div",{staticClass:"xdining-scan"},[n("scan-code",{directives:[{name:"show",rawName:"v-show",value:t.isScan,expression:"isScan"}],attrs:{camera:t.isScan?"rear":"off"},on:{backEvent:function(n){t.isScan=!1},decodeEvent:t.onDecode,errorEvent:t.onError}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isScan,expression:"!isScan"}],staticClass:"xscan-status"},[n("div",{staticClass:"xscan-status-top",class:{error:!t.scanStatus}},[n("i",{staticClass:"xsst-icon"}),n("p",{staticClass:"xsst-title"},[t._v(t._s(t.scanStatus?"核销成功":"核销失败"))]),n("p",{directives:[{name:"show",rawName:"v-show",value:!t.scanStatus,expression:"!scanStatus"}],staticClass:"xsst-desc"},[t._v(t._s(t.scanMessage))])]),n("div",{staticClass:"xbutton-box"},[t.initError?t._e():n("a",{staticClass:"xbutton fill continue",on:{click:function(n){return t.startScan()}}},[t._v("继续扫码")]),n("a",{staticClass:"xbutton back",on:{click:function(n){return t.backInfo()}}},[t._v("返回")])])]),n("audio",{ref:"audioS",attrs:{preload:"auto",src:e(99)}}),n("audio",{ref:"audioE",attrs:{preload:"auto",src:e(5330)}})],1)},d=[],p=function(){var t=this,n=t._self._c;return n("div",{staticClass:"xscan-code"},[n("qrcode-stream",{ref:"qrs",attrs:{camera:t.camera,torch:t.torch,track:t.track},on:{decode:t.onDecode,init:t.onInit}},[n("i",{staticClass:"xicon icon-arrow-left",on:{click:function(n){return t.todoBack()}}}),n("p",{staticClass:"xscan-code-line"}),n("p",{staticClass:"xscan-code-tip"},[t._v(t._s(t.title))])])],1)},h=[],m=e(2669);function v(t,n,e={leading:!0,trailing:!1}){let r=null,o=0,{leading:s,trailing:a}=e;function i(...e){const i=(new Date).getTime();s||o||(o=i);const c=n-(i-o);c<=0?(r&&(clearTimeout(r),r=null),t.apply(this,e),o=i):!r&&a&&(r=setTimeout((()=>{t.apply(this,e),o=(new Date).getTime(),r=null}),c))}return i.clear=function(){r&&clearTimeout(r),r=null,o=0},i}var S={name:"scanCode",components:{QrcodeStream:m.QrcodeStream},data(){return{error:"",title:"请扫描二维码2"}},props:{camera:{type:String,default:"off"},torch:{type:Boolean,default:!1},track:{type:Function}},mounted(){this.$refs.qrs.onLocate=t=>{0!==t.length&&this.onDecode(t[0].rawValue)}},methods:{onDecode:v((function(t){console.log("扫码结果Decode",t),this.title=new Date+t,this.$emit("decodeEvent",t)}),1e3),async onInit(t){try{await t}catch(n){"NotAllowedError"===n.name?this.error="ERROR: 您需要授予相机访问权限":"NotFoundError"===n.name?this.error="ERROR: 这个设备上没有摄像头":"NotSupportedError"===n.name?this.error="ERROR: 所需的安全上下文(HTTPS、本地主机)":"NotReadableError"===n.name?this.error="ERROR: 相机被占用":"OverconstrainedError"===n.name?this.error="ERROR: 安装摄像头不合适":"StreamApiNotSupportedError"===n.name?this.error="ERROR: 此浏览器不支持流API":"InsecureContextError"===n.name?this.error="ERROR: 不支持HTTP协议访问":this.error=n.name,this.$emit("errorEvent",this.error,n)}},todoBack(){this.$emit("backEvent")}}},w=S,g=(0,a.Z)(w,p,h,!1,null,null,null),x=g.exports,E={name:"diningScan",components:{scanCode:x},data(){return{initError:!1,isScan:!0,scanStatus:!1,scanMessage:"请重新扫码",scanInfo:{},queryInfo:{},writeOffSuccessPrompt:1,writeOffFailurePrompt:1}},methods:{onError(t){this.initError=!0,this.isScan=!1,this.scanMessage=t},onDecode(t){Math.random()>.5?(this.scanStatus=!0,this.scanMessage="核销成功"):(this.scanStatus=!1,this.scanMessage="核销失败"),this.scanStatus&&this.writeOffSuccessPrompt?(console.log("核销成功"),this.playAudio(!0)):!this.scanStatus&&this.writeOffFailurePrompt?(console.log("核销失败"),this.playAudio(!1)):this.isScan=!1},backInfo(){console.log("back")},startScan(){this.isScan=!0},playAudio(t){const n=t?"audioS":"audioE";this.$refs[n].currentTime=0,this.$refs[n].play()}}},b=E,O=(0,a.Z)(b,f,d,!1,null,null,null),R=O.exports;r.ZP.use(l.ZP);const y=[{path:"/",name:"home",component:R}],k=new l.ZP({routes:y});var C=k;r.ZP.config.productionTip=!1,new r.ZP({router:C,render:t=>t(u)}).$mount("#app")},5330:function(t,n,e){t.exports=e.p+"media/scan-error-tip.64adf786.mp3"},99:function(t,n,e){t.exports=e.p+"media/scan-success-tip.226ffdf8.mp3"}},n={};function e(r){var o=n[r];if(void 0!==o)return o.exports;var s=n[r]={exports:{}};return t[r].call(s.exports,s,s.exports,e),s.exports}e.m=t,function(){var t=[];e.O=function(n,r,o,s){if(!r){var a=1/0;for(l=0;l<t.length;l++){r=t[l][0],o=t[l][1],s=t[l][2];for(var i=!0,c=0;c<r.length;c++)(!1&s||a>=s)&&Object.keys(e.O).every((function(t){return e.O[t](r[c])}))?r.splice(c--,1):(i=!1,s<a&&(a=s));if(i){t.splice(l--,1);var u=o();void 0!==u&&(n=u)}}return n}s=s||0;for(var l=t.length;l>0&&t[l-1][2]>s;l--)t[l]=t[l-1];t[l]=[r,o,s]}}(),function(){e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,{a:n}),n}}(),function(){e.d=function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)}}(),function(){e.p="/"}(),function(){var t={143:0};e.O.j=function(n){return 0===t[n]};var n=function(n,r){var o,s,a=r[0],i=r[1],c=r[2],u=0;if(a.some((function(n){return 0!==t[n]}))){for(o in i)e.o(i,o)&&(e.m[o]=i[o]);if(c)var l=c(e)}for(n&&n(r);u<a.length;u++)s=a[u],e.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return e.O(l)},r=self["webpackChunkvue2project"]=self["webpackChunkvue2project"]||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))}();var r=e.O(void 0,[998],(function(){return e(1948)}));r=e.O(r)})();
//# sourceMappingURL=app.f8681eee.js.map