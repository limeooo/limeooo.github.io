

const c_messageType = {
  success: {
    icon: `
    <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 21 20" fill="none">
    <circle cx="10.3334" cy="10" r="7" fill="white"/>
    <path d="M10.3334 18C8.75111 18 7.20437 17.5308 5.88878 16.6518C4.57319 15.7727 3.54781 14.5233 2.94231 13.0615C2.33681 11.5997 2.17843 9.99115 2.48711 8.4393C2.79579 6.88745 3.55768 5.46199 4.6765 4.34317C5.79532 3.22435 7.22078 2.4624 8.77263 2.15372C10.3245 1.84504 11.933 2.00348 13.3948 2.60898C14.8566 3.21448 16.1061 4.23986 16.9852 5.55545C17.8642 6.87104 18.3334 8.41775 18.3334 10C18.3334 12.1217 17.4905 14.1566 15.9902 15.6569C14.4899 17.1572 12.4551 18 10.3334 18ZM8.44335 13.67C8.61062 13.829 8.83257 13.9176 9.06334 13.9176C9.29411 13.9176 9.51612 13.829 9.6834 13.67L14.9934 8.53C15.0745 8.45251 15.1389 8.35941 15.183 8.25629C15.2271 8.15316 15.2499 8.04218 15.2499 7.93002C15.2499 7.81787 15.2271 7.70688 15.183 7.60376C15.1389 7.50064 15.0745 7.40751 14.9934 7.33002C14.8261 7.17104 14.6041 7.0824 14.3733 7.0824C14.1426 7.0824 13.9206 7.17104 13.7533 7.33002L9.02336 11.83L6.91338 9.78C6.7461 9.62102 6.52415 9.53238 6.29338 9.53238C6.06261 9.53238 5.84066 9.62102 5.67339 9.78C5.59231 9.85749 5.52778 9.95062 5.48369 10.0537C5.4396 10.1569 5.41686 10.2679 5.41686 10.38C5.41686 10.4922 5.4396 10.6031 5.48369 10.7063C5.52778 10.8094 5.59231 10.9025 5.67339 10.98L8.44335 13.67Z" fill="#11DA41"/>
    </svg>
    `,
    status:'success'
  },
  error:  {
    icon: `
    <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 21 20" fill="none">
    <circle cx="10.3334" cy="10" r="7" fill="white"/>
    <path d="M10.3334 2C8.75111 2 7.20437 2.46922 5.88878 3.34827C4.57319 4.22732 3.54781 5.47673 2.94231 6.93854C2.33681 8.40035 2.17843 10.0089 2.48711 11.5607C2.79579 13.1126 3.55768 14.538 4.6765 15.6569C5.79532 16.7757 7.22078 17.5376 8.77263 17.8463C10.3245 18.155 11.933 17.9966 13.3948 17.3911C14.8566 16.7856 16.1061 15.7602 16.9852 14.4446C17.8642 13.129 18.3334 11.5823 18.3334 10C18.3334 7.87827 17.4905 5.84346 15.9902 4.34317C14.4899 2.84288 12.4551 2 10.3334 2ZM14.0234 12.58C14.1706 12.7272 14.2533 12.9268 14.2533 13.135C14.2533 13.3432 14.1706 13.5428 14.0234 13.69C13.8762 13.8372 13.6765 13.9199 13.4684 13.9199C13.2602 13.9199 13.0606 13.8372 12.9134 13.69L10.3334 11.12L7.75334 13.69C7.68046 13.7622 7.59411 13.8194 7.49913 13.8582C7.40416 13.8971 7.30242 13.9168 7.19981 13.9164C7.09721 13.9159 6.99573 13.8952 6.90111 13.8555C6.80649 13.8158 6.72059 13.7579 6.64836 13.685C6.57614 13.6121 6.51899 13.5257 6.48015 13.4308C6.44131 13.3358 6.42158 13.2341 6.42204 13.1315C6.42251 13.0289 6.44314 12.9274 6.48283 12.8327C6.52253 12.7381 6.58048 12.6522 6.65337 12.58L9.22337 10L6.65337 7.42001C6.50617 7.27282 6.42351 7.07319 6.42351 6.86502C6.42351 6.65686 6.50617 6.45719 6.65337 6.31C6.80056 6.1628 7.00019 6.08011 7.20836 6.08011C7.41652 6.08011 7.61616 6.1628 7.76335 6.31L10.3434 8.88L12.9234 6.31C13.0706 6.1628 13.2702 6.08011 13.4784 6.08011C13.6865 6.08011 13.8862 6.1628 14.0334 6.31C14.1806 6.45719 14.2632 6.65686 14.2632 6.86502C14.2632 7.07319 14.1806 7.27282 14.0334 7.42001L11.4634 10L14.0234 12.58Z" fill="#ED4141"/>
    </svg>
    `,
    status:'error'
  },
  warning: {
    icon: `
    <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 21 20" fill="none">
    <circle cx="10.3334" cy="10" r="7" fill="white"/>
    <path d="M10.3334 2C11.9156 2 13.4624 2.46918 14.778 3.34824C16.0935 4.22729 17.1189 5.47673 17.7244 6.93854C18.3299 8.40035 18.4884 10.0089 18.1797 11.5607C17.871 13.1126 17.1091 14.538 15.9902 15.6569C14.8714 16.7757 13.446 17.5376 11.8941 17.8463C10.3423 18.155 8.73372 17.9966 7.27191 17.3911C5.8101 16.7856 4.56069 15.7602 3.68164 14.4446C2.80259 13.129 2.33337 11.5823 2.33337 10C2.33337 7.87827 3.17622 5.84343 4.67651 4.34314C6.1768 2.84285 8.21164 2 10.3334 2ZM10.3334 12.74C10.0941 12.74 9.86012 12.811 9.66113 12.9439C9.46215 13.0769 9.3071 13.2659 9.21552 13.487C9.12393 13.7081 9.09992 13.9513 9.14661 14.1861C9.19329 14.4208 9.30856 14.6364 9.47778 14.8056C9.647 14.9748 9.86263 15.0901 10.0974 15.1367C10.3321 15.1834 10.5753 15.1595 10.7964 15.0679C11.0175 14.9763 11.2065 14.8212 11.3395 14.6223C11.4724 14.4233 11.5434 14.1893 11.5434 13.95C11.5434 13.6291 11.4159 13.3213 11.189 13.0944C10.962 12.8675 10.6543 12.74 10.3334 12.74ZM10.3334 11.79C10.5986 11.79 10.8529 11.6846 11.0405 11.4971C11.228 11.3096 11.3334 11.0552 11.3334 10.79V5.92001C11.3334 5.64286 11.2233 5.37707 11.0273 5.18109C10.8313 4.98512 10.5655 4.875 10.2884 4.875C10.0112 4.875 9.74541 4.98512 9.54944 5.18109C9.35346 5.37707 9.24341 5.64286 9.24341 5.92001V10.79C9.24316 10.9265 9.27086 11.0617 9.32483 11.1871C9.37879 11.3125 9.45782 11.4255 9.55713 11.5192C9.65644 11.6129 9.77388 11.6852 9.90222 11.7318C10.0306 11.7784 10.1671 11.7982 10.3034 11.79H10.3334Z" fill="#FF751A"/>
    </svg>
    `,
    status:'warning'
  },
  normal: {
    icon: `
    <svg xmlns="http://www.w3.org/2000/svg" width="21" height="20" viewBox="0 0 21 20" fill="none">
    <circle cx="10.3334" cy="10" r="7" fill="white"/>
    <path d="M10.3334 2C11.9156 2 13.4624 2.46918 14.778 3.34824C16.0935 4.22729 17.1189 5.47673 17.7244 6.93854C18.3299 8.40035 18.4884 10.0089 18.1797 11.5607C17.871 13.1126 17.1091 14.538 15.9902 15.6569C14.8714 16.7757 13.446 17.5376 11.8941 17.8463C10.3423 18.155 8.73372 17.9966 7.27191 17.3911C5.8101 16.7856 4.56069 15.7602 3.68164 14.4446C2.80259 13.129 2.33337 11.5823 2.33337 10C2.33337 7.87827 3.17622 5.84343 4.67651 4.34314C6.1768 2.84285 8.21164 2 10.3334 2ZM10.3334 12.74C10.0941 12.74 9.86012 12.811 9.66113 12.9439C9.46215 13.0769 9.3071 13.2659 9.21552 13.487C9.12393 13.7081 9.09992 13.9513 9.14661 14.1861C9.19329 14.4208 9.30856 14.6364 9.47778 14.8056C9.647 14.9748 9.86263 15.0901 10.0974 15.1367C10.3321 15.1834 10.5753 15.1595 10.7964 15.0679C11.0175 14.9763 11.2065 14.8212 11.3395 14.6223C11.4724 14.4233 11.5434 14.1893 11.5434 13.95C11.5434 13.6291 11.4159 13.3213 11.189 13.0944C10.962 12.8675 10.6543 12.74 10.3334 12.74ZM10.3334 11.79C10.5986 11.79 10.8529 11.6846 11.0405 11.4971C11.228 11.3096 11.3334 11.0552 11.3334 10.79V5.92001C11.3334 5.64286 11.2233 5.37707 11.0273 5.18109C10.8313 4.98512 10.5655 4.875 10.2884 4.875C10.0112 4.875 9.74541 4.98512 9.54944 5.18109C9.35346 5.37707 9.24341 5.64286 9.24341 5.92001V10.79C9.24316 10.9265 9.27086 11.0617 9.32483 11.1871C9.37879 11.3125 9.45782 11.4255 9.55713 11.5192C9.65644 11.6129 9.77388 11.6852 9.90222 11.7318C10.0306 11.7784 10.1671 11.7982 10.3034 11.79H10.3334Z" fill="#0099FF"/>
    </svg>
    `,
    status:'wraning'
  },
  loading:{
    icon: `
    <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 21 20" fill="none">
    <path style="--delay:0.8s" class="c_message_loading"
      d="M10.3077 2C10.0063 2 9.71721 2.12028 9.50409 2.33434C9.29096 2.5484 9.17126 2.83872 9.17126 3.14144V5.39426C9.17126 5.69698 9.29096 5.9873 9.50409 6.20135C9.71721 6.41541 10.0063 6.5357 10.3077 6.5357C10.6091 6.5357 10.8982 6.41541 11.1113 6.20135C11.3244 5.9873 11.4441 5.69698 11.4441 5.39426V3.10138C11.4338 2.80565 11.3095 2.52551 11.0975 2.32004C10.8855 2.11457 10.6024 1.99982 10.3077 2Z"
      fill="white" />
    <path style="--delay:0.6s" class="c_message_loading"
      d="M6.55007 7.83728C6.65295 7.95912 6.77995 8.05812 6.92299 8.12799C7.06603 8.19786 7.22196 8.23704 7.38091 8.24309C7.53985 8.24915 7.69829 8.22191 7.84619 8.16313C7.99409 8.10434 8.12821 8.01529 8.23998 7.90163C8.35175 7.78797 8.43877 7.6522 8.49547 7.50294C8.55217 7.35368 8.57732 7.19423 8.56933 7.03467C8.56134 6.87512 8.52037 6.71898 8.44904 6.57618C8.37772 6.43339 8.2776 6.30706 8.15504 6.20524L6.56005 4.60323C6.34701 4.38985 6.05843 4.27002 5.75756 4.27002C5.45669 4.27002 5.16805 4.38985 4.95502 4.60323C4.74195 4.8189 4.62244 5.11041 4.62244 5.41424C4.62244 5.71807 4.74195 6.00958 4.95502 6.22525L6.55007 7.83728Z"
      fill="white" />
    <path style="--delay:0.4s" class="c_message_loading"
      d="M6.88909 9.99004C6.88909 9.68732 6.76939 9.397 6.55626 9.18294C6.34314 8.96888 6.05409 8.84863 5.75268 8.84863H3.46978C3.16837 8.84863 2.87932 8.96888 2.6662 9.18294C2.45307 9.397 2.33337 9.68732 2.33337 9.99004C2.33337 10.2928 2.45307 10.5831 2.6662 10.7971C2.87932 11.0112 3.16837 11.1315 3.46978 11.1315H5.75268C6.05067 11.1315 6.33671 11.014 6.54927 10.8043C6.76183 10.5945 6.88386 10.3093 6.88909 10.0101V9.99004Z"
      fill="white" />
    <path style="--delay:0.2s" class="c_message_loading"
      d="M6.55051 12.6233L4.94554 14.2253C4.83884 14.3314 4.75412 14.4577 4.69632 14.5969C4.63852 14.7361 4.60876 14.8855 4.60876 15.0363C4.60876 15.1871 4.63852 15.3364 4.69632 15.4756C4.75412 15.6149 4.83884 15.7412 4.94554 15.8473C5.16027 16.0613 5.45051 16.1814 5.75302 16.1814C6.05552 16.1814 6.34576 16.0613 6.56049 15.8473L8.15548 14.2453L8.27511 14.1151C8.38165 14.0029 8.46433 13.87 8.51806 13.7247C8.57179 13.5793 8.59544 13.4244 8.58761 13.2696C8.57977 13.1147 8.54061 12.963 8.47249 12.8239C8.40437 12.6847 8.30871 12.5609 8.19138 12.4601C8.07406 12.3593 7.93754 12.2836 7.79011 12.2375C7.64267 12.1915 7.48745 12.1761 7.33389 12.1923C7.18034 12.2085 7.03165 12.2559 6.89696 12.3318C6.76228 12.4076 6.64441 12.5102 6.55051 12.6333V12.6233Z"
      fill="white" />
    <path style="--delay:0s" class="c_message_loading"
      d="M10.3077 13.4243C10.0063 13.4243 9.71721 13.5446 9.50409 13.7587C9.29096 13.9727 9.17126 14.263 9.17126 14.5658V16.8586C9.17126 17.1614 9.29096 17.4517 9.50409 17.6657C9.71721 17.8798 10.0063 18 10.3077 18C10.6091 18 10.8982 17.8798 11.1113 17.6657C11.3244 17.4517 11.4441 17.1614 11.4441 16.8586V14.5658C11.4468 14.4142 11.4194 14.2636 11.3635 14.1228C11.3075 13.982 11.2242 13.8538 11.1184 13.7457C11.0126 13.6375 10.8865 13.5517 10.7473 13.4931C10.6081 13.4345 10.4587 13.4043 10.3077 13.4043V13.4243Z"
      fill="white" />
    <path style="--delay:-0.2s" class="c_message_loading"
      d="M14.5361 12.6234C14.43 12.5176 14.3042 12.4337 14.1659 12.3767C14.0276 12.3197 13.8795 12.2906 13.73 12.291C13.5805 12.2915 13.4326 12.3215 13.2946 12.3794C13.1567 12.4373 13.0315 12.5219 12.9261 12.6284C12.8207 12.7349 12.7372 12.8612 12.6804 13.0001C12.6236 13.139 12.5946 13.2878 12.5951 13.438C12.5956 13.5881 12.6255 13.7367 12.6831 13.8752C12.7408 14.0138 12.825 14.1396 12.931 14.2454L14.5261 15.8474C14.7408 16.0614 15.031 16.1815 15.3336 16.1815C15.6361 16.1815 15.9263 16.0614 16.141 15.8474C16.3535 15.6335 16.4728 15.3436 16.4728 15.0414C16.4728 14.7393 16.3535 14.4494 16.141 14.2354L14.5361 12.6234Z"
      fill="white" />
    <path style="--delay:-0.4s" class="c_message_loading"
      d="M17.1472 8.84863H14.8643C14.5629 8.84863 14.2739 8.96888 14.0607 9.18294C13.8476 9.397 13.7279 9.68732 13.7279 9.99004C13.7279 10.2928 13.8476 10.5831 14.0607 10.7971C14.2739 11.0112 14.5629 11.1315 14.8643 11.1315H17.197C17.4985 11.1315 17.7875 11.0112 18.0006 10.7971C18.2138 10.5831 18.3335 10.2928 18.3335 9.99004C18.3335 9.68732 18.2138 9.397 18.0006 9.18294C17.7875 8.96888 17.4985 8.84863 17.197 8.84863H17.1472Z"
      fill="white" />
    <path style="--delay:-0.6s" class="c_message_loading"
      d="M14.5447 7.84754L16.1397 6.24553C16.3522 6.03156 16.4715 5.74172 16.4715 5.43953C16.4715 5.13735 16.3522 4.84747 16.1397 4.6335C15.9267 4.42012 15.6381 4.30029 15.3372 4.30029C15.0364 4.30029 14.7478 4.42012 14.5348 4.6335L12.9397 6.23551C12.8343 6.34201 12.7509 6.46832 12.6941 6.60722C12.6373 6.74612 12.6083 6.8949 12.6088 7.04505C12.6092 7.19521 12.6392 7.34382 12.6968 7.48237C12.7545 7.62092 12.8387 7.74667 12.9447 7.85252C13.0507 7.95837 13.1765 8.04223 13.3148 8.09926C13.4531 8.15629 13.6012 8.1854 13.7507 8.18494C13.9002 8.18447 14.0482 8.15443 14.1861 8.09654C14.3241 8.03865 14.4493 7.95404 14.5547 7.84754H14.5447Z"
      fill="white" />
  </svg>
    `,
    status:'loading'
  }
}
function message(conf) {
  let timer=null
  const duration=1500
  const config = {
    isWarning:false,
    duration: duration,
    isClose: false,
    msg: '这是一段文字',
    isInstance:true,//是否单例
  }
  const obj = Object.assign(config, conf)
  const icon = c_messageType[obj.type].icon
  const btnHtml = `
    <svg class="c_close_btn" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 8"
      fill="none">
    <path
      d="M4.3335 3.2321L1.25876 0.157367C1.05277 -0.0486172 0.70606 -0.0515333 0.494011 0.160516C0.280483 0.374043 0.280554 0.714956 0.490862 0.925264L3.5656 4L0.490863 7.07473C0.284876 7.28072 0.281963 7.62744 0.494011 7.83948C0.70754 8.05301 1.04845 8.05294 1.25876 7.84263L4.3335 4.7679L7.40823 7.84263C7.61422 8.04862 7.96093 8.05153 8.17298 7.83948C8.38651 7.62596 8.38644 7.28504 8.17613 7.07474L5.10139 4L8.17613 0.925265C8.38212 0.719278 8.38503 0.372563 8.17298 0.160516C7.95945 -0.0530134 7.61854 -0.0529424 7.40823 0.157368L4.3335 3.2321Z"
      fill="${obj.isWarning?"#666666":"#E5E5E5"}" />
    </svg>
  `
  const html = `
  <div class="c_message_wrapper c_message_fadeInDown ${config.isWarning?`c_warning_type ${obj.type}`:""}">
    <i class="c_base_icon">
      ${icon}
    </i>
    <span class="c_message_content">${obj.msg}</span>
    ${obj.isClose?btnHtml:''}
  </div>
  `
  const fragment = document.createElement('div')
  fragment.innerHTML = html
  if (obj.isInstance) {
    const target = document.querySelector('.c_message_wrapper')
    if (target) {
      target.parentElement.remove()
    }
  }
  document.body.appendChild(fragment)
  const close = fragment.querySelector('.c_close_btn')
  const clickEvent = function (e) {
    fragment.remove()
    if (timer) {
      clearTimeout(timer)
    }
  }
  close?.addEventListener('click',clickEvent)
  timer=setTimeout(() => {
    close?.removeEventListener('click',clickEvent)
    fragment.remove()
    clearTimeout(timer)
  }, obj.duration)
}